<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Parser</title>
    <meta name="HandheldFriendly" content="true" />
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/highlight.js/8.5.0/styles/solarized_light.min.css" /><style type="text/css">#topnav .navbar-nav{margin-top:8px}.navbar{min-width:300px}.nav>li{padding:2px 12px}.navbar-inverse .navbar-nav>li>a{color:#222;font-weight:bold}.navbar-spacer{height:51px}.btn-warning:active,.btn-primary:active{-webkit-transform:scale(.92);-moz-transform:scale(.92);-o-transform:scale(.92);-ms-transform:scale(.92);transform:scale(.92)}.btn-warning{background:#f2b560;background:#ee9f31 -webkit-linear-gradient(270deg, #f2b560, #ee9f31) repeat-x;background:#ee9f31 -moz-linear-gradient(270deg, #f2b560, #ee9f31) repeat-x;background:#ee9f31 -o-linear-gradient(270deg, #f2b560, #ee9f31) repeat-x;background:#ee9f31 -ms-linear-gradient(270deg, #f2b560, #ee9f31) repeat-x;background:#ee9f31 linear-gradient(180deg, #f2b560, #ee9f31) repeat-x}.btn-primary{background:#3d88c9;background:#2e6ea5 -webkit-linear-gradient(270deg, #3d88c9, #2e6ea5) repeat-x;background:#2e6ea5 -moz-linear-gradient(270deg, #3d88c9, #2e6ea5) repeat-x;background:#2e6ea5 -o-linear-gradient(270deg, #3d88c9, #2e6ea5) repeat-x;background:#2e6ea5 -ms-linear-gradient(270deg, #3d88c9, #2e6ea5) repeat-x;background:#2e6ea5 linear-gradient(180deg, #3d88c9, #2e6ea5) repeat-x}.navbar-inverse .navbar-nav>li>a:focus,.navbar-inverse .navbar-nav>li>a:hover{background:#73aad8;background:#4b91cd -webkit-linear-gradient(270deg, #73aad8, #4b91cd) repeat-x;background:#4b91cd -moz-linear-gradient(270deg, #73aad8, #4b91cd) repeat-x;background:#4b91cd -o-linear-gradient(270deg, #73aad8, #4b91cd) repeat-x;background:#4b91cd -ms-linear-gradient(270deg, #73aad8, #4b91cd) repeat-x;background:#4b91cd linear-gradient(180deg, #73aad8, #4b91cd) repeat-x}.navbar-inverse .navbar-nav>li>a.btn-warning:focus,.navbar-inverse .navbar-nav>li>a.btn-warning:hover{background:#ec9721;background:#c97c11 -webkit-linear-gradient(270deg, #ec9721, #c97c11) repeat-x;background:#c97c11 -moz-linear-gradient(270deg, #ec9721, #c97c11) repeat-x;background:#c97c11 -o-linear-gradient(270deg, #ec9721, #c97c11) repeat-x;background:#c97c11 -ms-linear-gradient(270deg, #ec9721, #c97c11) repeat-x;background:#c97c11 linear-gradient(180deg, #ec9721, #c97c11) repeat-x}.sidebar .nav{list-style:disc;padding-left:25px;}.sidebar .nav>li{display:list-item;}.sidebar .nav>li>a{color:#222;}.sidebar .nav>li>a:active{-webkit-box-shadow:0 2px 10px 2px rgba(0,0,0,0.25);box-shadow:0 2px 10px 2px rgba(0,0,0,0.25)}.sidebar .nav>li>a:hover{background:#3d88c9;background:#2e6ea5 -webkit-linear-gradient(270deg, #3d88c9, #2e6ea5) repeat-x;background:#2e6ea5 -moz-linear-gradient(270deg, #3d88c9, #2e6ea5) repeat-x;background:#2e6ea5 -o-linear-gradient(270deg, #3d88c9, #2e6ea5) repeat-x;background:#2e6ea5 -ms-linear-gradient(270deg, #3d88c9, #2e6ea5) repeat-x;background:#2e6ea5 linear-gradient(180deg, #3d88c9, #2e6ea5) repeat-x;color:#fff}.sidebar .nav>li.header,.sidebar .nav>li.active{display:none}.sidebar .nav>li.active>a{background:#73aad8;background:#4b91cd -webkit-linear-gradient(270deg, #73aad8, #4b91cd) repeat-x;background:#4b91cd -moz-linear-gradient(270deg, #73aad8, #4b91cd) repeat-x;background:#4b91cd -o-linear-gradient(270deg, #73aad8, #4b91cd) repeat-x;background:#4b91cd -ms-linear-gradient(270deg, #73aad8, #4b91cd) repeat-x;background:#4b91cd linear-gradient(180deg, #73aad8, #4b91cd) repeat-x;}.sidebar .nav>li.active>a:hover{background:#3d88c9;background:#2e6ea5 -webkit-linear-gradient(270deg, #3d88c9, #2e6ea5) repeat-x;background:#2e6ea5 -moz-linear-gradient(270deg, #3d88c9, #2e6ea5) repeat-x;background:#2e6ea5 -o-linear-gradient(270deg, #3d88c9, #2e6ea5) repeat-x;background:#2e6ea5 -ms-linear-gradient(270deg, #3d88c9, #2e6ea5) repeat-x;background:#2e6ea5 linear-gradient(180deg, #3d88c9, #2e6ea5) repeat-x;color:#fff}.sidebar .nav>li.header>a{font-weight:bold;background:#f2b560;background:#ee9f31 -webkit-linear-gradient(270deg, #f2b560, #ee9f31) repeat-x;background:#ee9f31 -moz-linear-gradient(270deg, #f2b560, #ee9f31) repeat-x;background:#ee9f31 -o-linear-gradient(270deg, #f2b560, #ee9f31) repeat-x;background:#ee9f31 -ms-linear-gradient(270deg, #f2b560, #ee9f31) repeat-x;background:#ee9f31 linear-gradient(180deg, #f2b560, #ee9f31) repeat-x;}.sidebar .nav>li.header>a:hover{background:#ec9721;background:#c97c11 -webkit-linear-gradient(270deg, #ec9721, #c97c11) repeat-x;background:#c97c11 -moz-linear-gradient(270deg, #ec9721, #c97c11) repeat-x;background:#c97c11 -o-linear-gradient(270deg, #ec9721, #c97c11) repeat-x;background:#c97c11 -ms-linear-gradient(270deg, #ec9721, #c97c11) repeat-x;background:#c97c11 linear-gradient(180deg, #ec9721, #c97c11) repeat-x;color:#fff}.sidebar .nav>li.level2>a{padding-left:30px}.sidebar .nav>li.level3>a{padding-left:50px}.sidebar .nav>li.level4>a{padding-left:70px}.sidebar .nav>li.level5>a,.sidebar .nav>li.level6>a{padding-left:90px}@media (min-width:768px){#topnav .nav>li{padding:0 4px}.navbar-right{margin-right:0}.navbar-nav >li>a{padding:6px 10px}.sidebar{overflow:auto;position:fixed;top:51px;left:0;bottom:0;background:#ddd;padding:0;}.sidebar h1,.sidebar h2{display:none}.sidebar .nav{list-style:none;padding-left:0;}.sidebar .nav>li{padding:0;}.sidebar .nav>li.header,.sidebar .nav>li.active{display:block}.sidebar .nav>li>a{padding-top:8px;padding-bottom:8px}.sidebar .nav>li.level2>a:before,.sidebar .nav>li.level3>a:before,.sidebar .nav>li.level4>a:before,.sidebar .nav>li.level5>a:before,.sidebar .nav>li.level6>a:before{content:"\2023";font-size:150%;line-height:10%;font-weight:bold;padding-right:5px;display:block;float:left;margin-top:8px;margin-left:-15px;color:#666}}img.preload{display:none}body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:16px;line-height:1.2;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto;-webkit-hyphenate-before:2;-webkit-hyphenate-after:3;hyphenate-lines:3;min-width:300px}h1,h2,h3,h4,h5,h6{font-weight:bold;}h1:before,h2:before,h3:before,h4:before,h5:before,h6:before{display:block;content:" ";margin-top:-66px;height:66px;visibility:hidden}h1,h2,h3{clear:both}h1{border-bottom:3px solid #222;padding-bottom:5px}h2{border-bottom:2px dotted #222;padding-bottom:3px}h3{border-bottom:2px dotted #aaa;padding-bottom:2px}h4{border-bottom:1px dotted #aaa}dt{font-weight:bold;margin-top:8px}dd{margin-left:20px}blockquote{border:1px solid #eee;border-radius:3px;border-left:5px solid #337ab7;padding:5px 15px;margin:10px 0}svg,img{max-width:100%}table{border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all;}table th,table td{padding:6px 13px;border:1px solid #ddd}table th{background-color:rgba(0,0,0,0.04);font-weight:bold;border-bottom:3px solid #999}table tr{background-color:#fff;border-top:1px solid #ccc;}table tr:nth-child(2n){background-color:rgba(0,0,0,0.04)}img{vertical-align:middle}.emoji{height:1em}abbr,acronym{border-bottom:dotted 1px}code,tt{background-color:#fafafa;border-radius:4px;font-size:85%;margin:0;padding:.2em 0}pre{background-color:#fafafa;border-radius:10px;border:1px solid #a4a4a4;font-size:85%;margin:20px;padding:10px;}pre code,pre tt{background:none}pre.language{counter-reset:line;max-height:265px;padding-top:30px;padding-bottom:0;overflow-x:hidden;}pre.language code,pre.language tt{display:block;position:relative;float:left;width:100%;border-left:45px solid #ddd;margin-left:-10px;padding-left:5px;}pre.language code:before,pre.language tt:before{counter-increment:line;content:counter(line);min-width:35px;float:left;text-align:right;padding-right:5px;color:#808080;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none;margin-left:-45px}pre.language code:first-of-type,pre.language tt:first-of-type{padding-top:10px}pre.language code:last-child,pre.language tt:last-child{padding-bottom:10px}pre.language header{border-top-left-radius:4px;border-top-right-radius:4px;font-weight:bold;background:#fafafa;margin:-30px -10px 0 -10px;padding:5px 15px}pre.language.coffeescript header,pre.language.javascript header,pre.language.ruby header,pre.language.python header,pre.language.perl header,pre.language.cc header,pre.language.cpp header,pre.language.cs header,pre.language.java header,pre.language.jsp header,pre.language.groovy header,pre.language.php header,pre.language.bash header,pre.language.sql header,pre.language.makefile header{background:#f0ad4e}pre.language.json header,pre.language.cson header,pre.language.yaml header{background:#61b961}pre.language.handlebars header,pre.language.css header,pre.language.stylus header,pre.language.scss header,pre.language.less header,pre.language.markdown header{background:#76abca}ul.table-of-contents{max-width:100px;max-height:30px;overflow:hidden;position:fixed;top:51px;right:0;background:#ddd;padding:5px 15px;-webkit-transition:max-width 100ms ease 1.2s, max-height 1s ease 200ms;-moz-transition:max-width 100ms ease 1.2s, max-height 1s ease 200ms;-o-transition:max-width 100ms ease 1.2s, max-height 1s ease 200ms;-ms-transition:max-width 100ms ease 1.2s, max-height 1s ease 200ms;transition:max-width 100ms ease 1.2s, max-height 1s ease 200ms;border-left:2px solid #999;border-bottom:2px solid #999;border-bottom-left-radius:10px;list-style-type:none;white-space:nowrap;z-index:100;}ul.table-of-contents:hover{max-width:285px;max-height:248px;-webkit-transition:max-width 100ms ease, max-height 1s ease 100ms;-moz-transition:max-width 100ms ease, max-height 1s ease 100ms;-o-transition:max-width 100ms ease, max-height 1s ease 100ms;-ms-transition:max-width 100ms ease, max-height 1s ease 100ms;transition:max-width 100ms ease, max-height 1s ease 100ms;overflow-y:auto}ul.table-of-contents header{background:#999;font-weight:bold;margin:-5px -15px;padding:5px 15px}ul.table-of-contents>li{padding-bottom:2px;padding-right:8px;}ul.table-of-contents>li:first-of-type{padding-top:10px}ul.table-of-contents a{color:#222}ul.table-of-contents li.sidebar{display:list-item}@media (min-width:768px){ul.table-of-contents li.sidebar{display:none}}div.detail,div.info,div.warning,div.alert{padding:30px 10px 6px 10px;margin:5px 0 8px 0;border-radius:3px;}div.detail>p,div.info>p,div.warning>p,div.alert>p{margin-bottom:0}div.detail header,div.info header,div.warning header,div.alert header{font-weight:bold;position:absolute;margin-top:-30px;margin-left:-10px;padding:3px 20px 3px 10px;border-bottom-right-radius:18px}div.detail{background-color:#fafafa;border:2px solid #ddd;padding-top:0}div.info{background-color:#9f9;border:2px solid #6d6;}div.info header{background-color:#6d6}div.warning{background-color:#fc9;border:2px solid #e86;}div.warning header{background-color:#e86}div.alert{background-color:#f99;border:2px solid #c00;}div.alert header{background-color:#c00;color:#fff}.text-red{color:#d13f19}.text-green{color:#2ecc40}.text-yellow{color:#ffdc00}.text-blue{color:#0074d9}.text-magenta{color:#f0f}.text-cyan{color:#0ff}.text-gray{color:#aaa}.bg-white{background-color:#fff}.center{text-align:center}.left{float:left}.right{float:right}.hide{display:none}.spacing{padding:10px}.cse .gsc-control-cse,.gsc-control-cse{padding:0 !important;}.cse .gsc-control-cse table tr,.gsc-control-cse table tr,.cse .gsc-control-cse table th,.gsc-control-cse table th,.cse .gsc-control-cse table td,.gsc-control-cse table td{border:0}.cse .gsc-control-cse .gsc-cursor-current-page,.gsc-control-cse .gsc-cursor-current-page{color:#fff !important}.cse .gsc-control-cse .gsc-webResult.gsc-result:hover,.gsc-control-cse .gsc-webResult.gsc-result:hover,.cse .gsc-control-cse .gsc-imageResult:hover,.gsc-control-cse .gsc-imageResult:hover{border-left:5px solid #337ab7;padding-left:3px}.cse .gsc-control-cse .gcsc-branding,.gsc-control-cse .gcsc-branding{display:none !important}.gsc-adBlock{display:none !important}@media print{.navbar-spacer,.table-of-contents,.sidebar{display:none}.main{left:0;width:100%}pre.language header{border-bottom:2px solid #999}}</style>
  </head>

  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#topnav" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://alinex.github.io/" onmouseover="logo.src='https://alinex.github.io/images/Alinex-200.png'" onmouseout="logo.src='https://alinex.github.io/images/Alinex-black-200.png'">
  <img name="logo" src="https://alinex.github.io/images/Alinex-black-200.png" width="150" title="Alinex Homepage">
</a>
<img class="preload" src="https://alinex.github.io/images/Alinex-200.png" aria-hidden="true">

        </div>
        <div id="topnav" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://alinex.github.io/blog" class="btn btn-primary">
    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Blog
  </a></li>
<li><a href="https://alinex.github.io/develop" class="btn btn-primary">
    <span class="glyphicon glyphicon-book" aria-hidden="true"></span> Develop
  </a></li>
<li><a href="https://alinex.github.io/code.html" class="btn btn-warning">
    <span class="glyphicon glyphicon-cog" aria-hidden="true"></span> Code
  </a></li>

          </ul>
          <form class="navbar-form navbar-right">
            <input name="q" type="text" class="form-control" placeholder="Search...">
          </form>
        </div>
      </div>
    </nav>

    <div class="navbar-spacer"></div>

    <div class="container-fluid">
      <div class="row">

        <div class="col-sm-9 col-sm-push-3 col-md-10 col-md-push-2 main">
          <script>
  (function() {
    var cx = '010539487162786288372:chxqbheanxc';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:searchresults-only></gcse:searchresults-only>

          <main><p><ul class="table-of-contents" aria-hidden="true"><header>Index</header>
<li><a href="#node-modules">Node modules</a></li>
<li><a href="#setup">Setup</a>
<ul>
<li><a href="#tagalias">tagAlias</a></li>
<li><a href="#alternative-tag-names">Alternative Tag Names</a></li>
<li><a href="#file">file()</a></li>
</ul>
</li>
<li><a href="#helper-methods">Helper methods</a>
<ul>
<li><a href="#extractdocs">extractDocs()</a></li>
<li><a href="#stripindent">stripIndent()</a></li>
<li><a href="#tags">tags()</a></li>
<li><a href="#tagparamevent">tagParamEvent()</a></li>
</ul>
</li>
<li class="sidebar"><a href="#further-pages">Further Pages</a></li></ul>
</p><h1 id="parser">Parser</h1>
<blockquote>
<p>Path: <code>/src/helper/parse.coffee</code> compiled to <code>/lib/helper/parse.js</code></p>
</blockquote>
<p>Methods used to get the documentation out of the files and formatted as Markdown.
This will</p>
<ul>
<li>read the file’s content</li>
<li>extract the document parts</li>
<li>some autodetection from code</li>
<li>add code as highlight text (in internal view)</li>
<li>interpret @tags</li>
<li>create a complete report per file</li>
</ul>
<h2 id="node-modules">Node modules</h2>
<pre style="counter-reset:line 14" class="language coffeescript"><header>CoffeeScript Code</header><code>debug = <span class="hljs-built_in">require</span>(<span class="hljs-string">'debug'</span>) <span class="hljs-string">'codedoc:parse'</span></code>
<code>chalk = <span class="hljs-built_in">require</span> <span class="hljs-string">'chalk'</span></code>
<code>async = <span class="hljs-built_in">require</span> <span class="hljs-string">'async'</span></code>
<code>path = <span class="hljs-built_in">require</span> <span class="hljs-string">'path'</span></code>
<code>isBinaryFile = <span class="hljs-built_in">require</span> <span class="hljs-string">'isbinaryfile'</span></code>
<code>uslug = <span class="hljs-built_in">require</span> <span class="hljs-string">'uslug'</span></code>
<code><span class="hljs-comment"># include alinex modules</span></code>
<code>util = <span class="hljs-built_in">require</span> <span class="hljs-string">'alinex-util'</span></code>
<code>fs = <span class="hljs-built_in">require</span> <span class="hljs-string">'alinex-fs'</span></code>
<code>Report = <span class="hljs-built_in">require</span> <span class="hljs-string">'alinex-report'</span></code>
<code><span class="hljs-comment"># internal methods</span></code>
<code>language = <span class="hljs-built_in">require</span> <span class="hljs-string">'./language'</span></code></pre>
<h2 id="setup">Setup</h2>
<h3 id="tagalias">tagAlias</h3>
<h3 id="alternative-tag-names">Alternative Tag Names</h3>
<p>These are aliases for other tags, implemented below.</p>
<pre style="counter-reset:line 34" class="language coffeescript"><header>CoffeeScript Code</header><code>tagAlias =</code>
<code>  alias: <span class="hljs-string">'name'</span></code>
<code>  arg: <span class="hljs-string">'param'</span></code>
<code>  argument: <span class="hljs-string">'param'</span></code>
<code>  returns: <span class="hljs-string">'return'</span></code>
<code>  throw: <span class="hljs-string">'throws'</span></code>
<code>  exception: <span class="hljs-string">'throws'</span></code>
<code>  fires: <span class="hljs-string">'event'</span></code>
<code>  constructor: <span class="hljs-string">'construct'</span></code>
<code>  describe: <span class="hljs-string">'description'</span></code></pre>
<h1 id="external-methods">External Methods</h1>
<h3 id="file">file()</h3>
<p>Parse a single file and get it’s documentation as report back.</p>
<blockquote>
<p class="api-usage"><strong>Usage:</strong> public <code>file(file, local, setup, symbol, cb)</code></p>
</blockquote>
<dl class="api-spec">
<dt>Parameter</dt>
<dd>
<ul>
<li><code>file</code> - <code>string</code> - absolute path of file to analyze</li>
<li><code>local</code> - <code>string</code> - local path, absolute from input directory</li>
<li><code>setup</code> - <code>object</code> - setup configuration from <code>run()</code> method</li>
<li><code>symbol</code> - <code>object</code> - map to fill with code symbols as <code>[file, anchor]</code> to
resolve links later</li>
<li><code>cb</code> - <code>function(err, report)</code> - callback which is called with error or <code>Report</code> instance</li>
</ul>
</dd>
</dl>
<pre style="counter-reset:line 57" class="language coffeescript"><header>CoffeeScript Code</header><code>exports.file = <span class="hljs-function"><span class="hljs-params">(file, local, setup, symbols, cb)</span> -&gt;</span></code>
<code>  async.waterfall [</code>
<code>    <span class="hljs-comment"># get file</span></code>
<code>    (cb) -&gt;</code>
<code>      (<span class="hljs-keyword">if</span> setup.verbose &gt; <span class="hljs-number">1</span> <span class="hljs-keyword">then</span> <span class="hljs-built_in">console</span>.log <span class="hljs-keyword">else</span> debug) <span class="hljs-string">"analyze <span class="hljs-subst">#{file}</span>"</span></code>
<code>      fs.readFile file, <span class="hljs-function"><span class="hljs-params">(err, buffer)</span> -&gt;</span></code>
<code>        <span class="hljs-keyword">return</span> cb err <span class="hljs-keyword">if</span> err</code>
<code>        isBinaryFile buffer, buffer.length, <span class="hljs-function"><span class="hljs-params">(err, binary)</span> -&gt;</span></code>
<code>          <span class="hljs-keyword">return</span> cb err ? <span class="hljs-string">'BINARY'</span> <span class="hljs-keyword">if</span> err <span class="hljs-keyword">or</span> binary</code>
<code>          cb <span class="hljs-literal">null</span>, buffer.toString <span class="hljs-string">'utf8'</span></code>
<code>    <span class="hljs-comment"># analyze language</span></code>
<code>    (content, cb) -&gt;</code>
<code>      lang = language file, content</code>
<code>      <span class="hljs-keyword">unless</span> lang</code>
<code>        (<span class="hljs-keyword">if</span> setup.verbose <span class="hljs-keyword">then</span> <span class="hljs-built_in">console</span>.log <span class="hljs-keyword">else</span> debug) \</code>
<code>          chalk.magenta <span class="hljs-string">"could not detect language of <span class="hljs-subst">#{file}</span>"</span></code>
<code>        <span class="hljs-keyword">return</span> cb <span class="hljs-string">'UNKNOWN'</span></code>
<code>      (<span class="hljs-keyword">if</span> setup.verbose &gt; <span class="hljs-number">2</span> <span class="hljs-keyword">then</span> <span class="hljs-built_in">console</span>.log <span class="hljs-keyword">else</span> debug) \</code>
<code>        chalk.grey <span class="hljs-string">"<span class="hljs-subst">#{file}</span>: detected as <span class="hljs-subst">#{lang.name}</span>"</span></code>
<code>      cb <span class="hljs-literal">null</span>, content, lang</code>
<code>    <span class="hljs-comment"># create report</span></code>
<code>    (content, lang, cb) -&gt;</code>
<code>      report = <span class="hljs-keyword">new</span> Report()</code>
<code>      <span class="hljs-keyword">if</span> lang.name <span class="hljs-keyword">is</span> <span class="hljs-string">'markdown'</span></code>
<code>        report.raw content</code>
<code>      <span class="hljs-keyword">else</span></code>
<code>        <span class="hljs-comment"># extract docs</span></code>
<code>        <span class="hljs-keyword">try</span></code>
<code>          docs = extractDocs file, content, setup, lang, symbols</code>
<code>        <span class="hljs-keyword">catch</span> error</code>
<code>          debug chalk.magenta <span class="hljs-string">"Could not parse documentation at <span class="hljs-subst">#{file}</span>: \</code>
<code>          <span class="hljs-subst">#{chalk.grey error.message + error.stack}</span>"</span></code>
<code>          <span class="hljs-keyword">return</span> cb <span class="hljs-keyword">new</span> Error <span class="hljs-string">"Could not parse documentation at <span class="hljs-subst">#{file}</span>: \</code>
<code></span></code></pre>
<p>{chalk.grey error.message}&quot;
create report for undocumented code</p>
<pre style="counter-reset:line 92" class="language coffeescript"><header>CoffeeScript Code</header><code>      <span class="hljs-keyword">unless</span> docs.length</code>
<code>        <span class="hljs-keyword">return</span> cb <span class="hljs-string">'CODE_DISABLED'</span> <span class="hljs-keyword">unless</span> setup.code</code>
<code>        report.h1 <span class="hljs-string">"File: <span class="hljs-subst">#{path.basename local}</span>"</span></code>
<code>        report.quote <span class="hljs-string">"Path: <span class="hljs-subst">#{local}</span>"</span></code>
<code>        report.code stripIndent(content, lang.tab), lang.name</code>
<code>        report.p Report.style <span class="hljs-string">'code: style="max-height:none"'</span></code>
<code>        <span class="hljs-keyword">return</span> cb <span class="hljs-literal">null</span>, report</code>
<code>      <span class="hljs-comment"># create report out of docs</span></code>
<code>      pos = <span class="hljs-number">0</span></code>
<code>      <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> docs</code>
<code>        <span class="hljs-keyword">if</span> pos &lt; doc[<span class="hljs-number">0</span>] <span class="hljs-keyword">and</span> setup.code</code>
<code>          <span class="hljs-comment"># code block before doc</span></code>
<code>          report.code stripIndent(content[pos..doc[<span class="hljs-number">0</span>]], lang.tab), lang.name</code>
<code>          <span class="hljs-keyword">if</span> pos <span class="hljs-comment"># set correct line number</span></code>
<code>            line = content[<span class="hljs-number">0.</span>.pos].split(<span class="hljs-string">'\n'</span>).length - <span class="hljs-number">1</span></code>
<code>            report.p Report.style <span class="hljs-string">"code: style=\"counter-reset:line <span class="hljs-subst">#{line}</span>\""</span></code>
<code>        <span class="hljs-comment"># add doc block</span></code>
<code>        md = doc[<span class="hljs-number">2</span>].replace <span class="hljs-regexp">/\n\s*?$/</span>, <span class="hljs-string">''</span></code>
<code>        report.raw <span class="hljs-string">"\n<span class="hljs-subst">#{md}</span>\n\n"</span></code>
<code>        pos = doc[<span class="hljs-number">1</span>]</code>
<code>      <span class="hljs-keyword">if</span> pos &lt; content.length <span class="hljs-keyword">and</span> setup.code</code>
<code>        <span class="hljs-comment"># last code block</span></code>
<code>        report.code stripIndent(content[pos..], lang.tab), lang.name</code>
<code>        <span class="hljs-keyword">if</span> pos <span class="hljs-comment"># set correct line number</span></code>
<code>          line = content[<span class="hljs-number">0.</span>.pos].split(<span class="hljs-string">'\n'</span>).length - <span class="hljs-number">1</span></code>
<code>          report.p Report.style <span class="hljs-string">"code: style=\"counter-reset:line <span class="hljs-subst">#{line}</span>\""</span></code>
<code>      <span class="hljs-comment"># optimize report by adding path with compiled path</span></code>
<code>      source = <span class="hljs-string">"`<span class="hljs-subst">#{local}</span>`"</span></code>
<code>      <span class="hljs-keyword">if</span> match = local.match <span class="hljs-regexp">/^\/src(\/.*)\.coffee$/</span></code>
<code>        source += <span class="hljs-string">" compiled to `/lib<span class="hljs-subst">#{match[<span class="hljs-number">1</span>]}</span>.js`"</span></code>
<code>      report.body = report.body.replace <span class="hljs-regexp">/(\n\s*={10,}\s*\n)/</span>, <span class="hljs-string">"$1\n&gt; Path: <span class="hljs-subst">#{source}</span>\n\n"</span></code>
<code>    cb <span class="hljs-literal">null</span>, report</code>
<code>  <span class="hljs-comment"># remove internal</span></code>
<code>  (report, cb) -&gt;</code>
<code>    report.body = <span class="hljs-keyword">unless</span> setup.code</code>
<code>      report.body</code>
<code>      .replace <span class="hljs-regexp">/&lt;!--\s*internal\s*--&gt;[\s\S]*?&lt;!--\s*end internal\s*--&gt;/ig</span>, <span class="hljs-string">''</span></code>
<code>      .replace <span class="hljs-regexp">/&lt;!--\s*internal\s*--&gt;[\s\S]*$/i</span>, <span class="hljs-string">''</span></code>
<code>    <span class="hljs-keyword">else</span></code>
<code>      report.body.replace <span class="hljs-regexp">/&lt;!--\s*(end )?internal\s*--&gt;/ig</span>, <span class="hljs-string">''</span></code>
<code>    <span class="hljs-keyword">unless</span> report.body.trim().length</code>
<code>      <span class="hljs-keyword">return</span> cb <span class="hljs-string">'EMPTY'</span></code>
<code>    <span class="hljs-comment"># add table of contents and HTML comment mark for later additions</span></code>
<code>    report.body = <span class="hljs-string">'@[toc]\n&lt;!-- end-of-toc --&gt;\n\n'</span> + report.body</code>
<code>    cb <span class="hljs-literal">null</span>, report</code>
<code>], cb</code></pre>
<h2 id="helper-methods">Helper methods</h2>
<h3 id="extractdocs">extractDocs()</h3>
<blockquote>
<p class="api-usage"><strong>Usage:</strong> <code>extractDocs(file, content, setup, lang, symbol)</code></p>
</blockquote>
<dl class="api-spec">
<dt>Parameter</dt>
<dd>
<ul>
<li><code>file</code> - <code>String</code> - full filename for reporting</li>
<li><code>content</code> - <code>String</code> - complete file content</li>
<li><code>setup</code> - <code>object</code> - setup configuration from <a href="../index.coffee.html#run" title="File: /home/alex/github/node-codedoc/src/index.coffee Element: run()"><code>run()</code></a> method</li>
<li><code>lang</code> - <code>object</code> - language definition structure from <a href="language.coffee.html" title="File: language.coffee">Language Definition</a></li>
<li><code>symbol</code> - <code>object</code> - map to fill with code symbols as <code>[file, anchor]</code> to</li>
</ul>
</dd>
<dt>Return</dt>
<dd><code>Array</code> - list of documentation extracts</dd>
</dl>
<pre style="counter-reset:line 149" class="language coffeescript"><header>CoffeeScript Code</header><code><span class="hljs-function"><span class="hljs-title">extractDocs</span> = <span class="hljs-params">(file, content, setup, lang, symbols)</span> -&gt;</span></code>
<code>  <span class="hljs-comment"># document comments extraction</span></code>
<code>  docs = []</code>
<code>  <span class="hljs-keyword">if</span> lang.doc</code>
<code>    [re, fn] = lang.doc</code>
<code>    <span class="hljs-keyword">while</span> match = re.exec content</code>
<code>      match[<span class="hljs-number">1</span>] = fn match[<span class="hljs-number">1</span>] <span class="hljs-keyword">if</span> fn</code>
<code>      end = match.index + match[<span class="hljs-number">0</span>].length</code>
<code>      cend = content.indexOf <span class="hljs-string">'\n'</span>, end</code>
<code>      code = <span class="hljs-keyword">if</span> cend &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> content[end..cend] <span class="hljs-keyword">else</span> content[end..]</code>
<code>      docs.push [match.index, end, match[<span class="hljs-number">1</span>], code.trim()]</code>
<code>    (<span class="hljs-keyword">if</span> setup.verbose &gt; <span class="hljs-number">2</span> <span class="hljs-keyword">then</span> <span class="hljs-built_in">console</span>.log <span class="hljs-keyword">else</span> debug) \</code>
<code>      chalk.grey <span class="hljs-string">"<span class="hljs-subst">#{file}</span>: <span class="hljs-subst">#{docs.length}</span> doc comments"</span></code>
<code>  <span class="hljs-comment"># internal comments extraction</span></code>
<code>  <span class="hljs-keyword">if</span> lang.api <span class="hljs-keyword">and</span> setup.code</code>
<code>    [re, fn] = lang.api</code>
<code>    <span class="hljs-keyword">while</span> match = re.exec content</code>
<code>      match[<span class="hljs-number">1</span>] = fn match[<span class="hljs-number">1</span>] <span class="hljs-keyword">if</span> fn</code>
<code>      end = match.index + match[<span class="hljs-number">0</span>].length</code>
<code>      found = <span class="hljs-literal">false</span></code>
<code>      <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> docs</code>
<code>        <span class="hljs-keyword">if</span> c[<span class="hljs-number">0</span>] <span class="hljs-keyword">is</span> match.index <span class="hljs-keyword">and</span> c[<span class="hljs-number">1</span>] <span class="hljs-keyword">is</span> end</code>
<code>          found = <span class="hljs-literal">true</span></code>
<code>          <span class="hljs-keyword">break</span></code>
<code>      <span class="hljs-keyword">unless</span> found</code>
<code>        end = match.index + match[<span class="hljs-number">0</span>].length</code>
<code>        cend = content.indexOf <span class="hljs-string">'\n'</span>, end</code>
<code>        code = <span class="hljs-keyword">if</span> cend &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> content[end..cend] <span class="hljs-keyword">else</span> content[end..]</code>
<code>        docs.push [match.index, end, match[<span class="hljs-number">1</span>], code.trim()]</code>
<code>    (<span class="hljs-keyword">if</span> setup.verbose &gt; <span class="hljs-number">2</span> <span class="hljs-keyword">then</span> <span class="hljs-built_in">console</span>.log <span class="hljs-keyword">else</span> debug) \</code>
<code>      chalk.grey <span class="hljs-string">"<span class="hljs-subst">#{file}</span>: <span class="hljs-subst">#{docs.length}</span> doc comments (with internal)"</span></code>
<code>  <span class="hljs-comment"># interpret tags</span></code>
<code>  <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> docs</code>
<code>    tags doc, lang.tags, setup, file, symbols</code>
<code>  <span class="hljs-comment"># sort found sections</span></code>
<code>  docs.sort (a, b) -&gt;</code>
<code>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> <span class="hljs-keyword">if</span> a[<span class="hljs-number">0</span>] &lt; b[<span class="hljs-number">0</span>]</code>
<code>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> <span class="hljs-keyword">if</span> a[<span class="hljs-number">0</span>] &gt; b[<span class="hljs-number">0</span>]</code>
<code>    <span class="hljs-number">0</span></code>
<code>  <span class="hljs-keyword">return</span> docs</code></pre>
<h3 id="stripindent">stripIndent()</h3>
<p>Remove indents which are the same in all lines. The tab size is used to translate
if tabs are included.</p>
<blockquote>
<p class="api-usage"><strong>Usage:</strong> <code>stripIndent(code, tab)</code></p>
</blockquote>
<dl class="api-spec">
<dt>Parameter</dt>
<dd>
<ul>
<li><code>code</code> - <code>string</code> - original code lines</li>
<li><code>tab</code> - <code>integer</code> - number of spaces to use instead of tab</li>
</ul>
</dd>
<dt>Return</dt>
<dd><code>string</code> - optimized code view</dd>
</dl>
<pre style="counter-reset:line 197" class="language coffeescript"><header>CoffeeScript Code</header><code><span class="hljs-function"><span class="hljs-title">stripIndent</span> = <span class="hljs-params">(code, tab)</span> -&gt;</span></code>
<code>  str = code.replace <span class="hljs-regexp">/^[ \t]*(?=\S)/gm</span>, <span class="hljs-function"><span class="hljs-params">(e)</span> -&gt;</span></code>
<code>    e.replace <span class="hljs-string">'\t'</span>, util.string.repeat <span class="hljs-string">' '</span>, tab ? <span class="hljs-number">2</span></code>
<code>  match = str.match <span class="hljs-regexp">/^ *(?=\S)/gm</span></code>
<code>  <span class="hljs-keyword">return</span> code <span class="hljs-keyword">unless</span> match</code>
<code>  indent = Math.min.apply Math, match.map (e) -&gt; e.length</code>
<code>  code.replace <span class="hljs-keyword">new</span> RegExp(<span class="hljs-string">"^ {<span class="hljs-subst">#{indent}</span>}"</span>, <span class="hljs-string">'gm'</span>), <span class="hljs-string">''</span></code></pre>
<h3 id="tags">tags()</h3>
<p>Replace tags in markdown with real markdown syntax and add some possible information
autodetected from code.</p>
<blockquote>
<p class="api-usage"><strong>Usage:</strong> <code>tags(doc, lang, setup, file, symbol)</code></p>
</blockquote>
<dl class="api-spec">
<dt>Parameter</dt>
<dd>
<ul>
<li><code>doc</code> - <code>array</code> - markdown document as read from file with: startpos, endpos, doc, codeline</li>
<li><code>lang</code> - <code>object</code> - language definition structure from <a href="language.coffee.html" title="File: language.coffee">Language Definition</a></li>
<li><code>setup</code> - <code>object</code> - setup configuration from <a href="../index.coffee.html#run" title="File: /home/alex/github/node-codedoc/src/index.coffee Element: run()"><code>run()</code></a> method</li>
<li><code>file</code> - <code>file</code> - file name used for relative link creation</li>
<li><code>symbol</code> - <code>object</code> - map to fill with code symbols as <code>[file, anchor]</code> to
resolve links later</li>
</ul>
</dd>
</dl>
<pre style="counter-reset:line 214" class="language coffeescript"><header>CoffeeScript Code</header><code><span class="hljs-function"><span class="hljs-title">tags</span> = <span class="hljs-params">(doc, lang, setup, file, symbols)</span> -&gt;</span></code>
<code>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">unless</span> lang</code>
<code>  md = doc[<span class="hljs-number">2</span>]</code>
<code>  code = doc[<span class="hljs-number">3</span>]</code>
<code>  <span class="hljs-comment"># extract tags</span></code>
<code>  spec = {}</code>
<code>  <span class="hljs-keyword">if</span> match = md.match <span class="hljs-regexp">/(?:^|(?:\n|[ \t\r]){2,})\s*(?=@)/</span></code>
<code>    add = md[match.index+match[<span class="hljs-number">0</span>].length..].trim()</code>
<code>    md = <span class="hljs-keyword">if</span> match.index <span class="hljs-keyword">then</span> md[<span class="hljs-number">0.</span>.match.index<span class="hljs-number">-1</span>] + <span class="hljs-string">'\n'</span> <span class="hljs-keyword">else</span> <span class="hljs-string">''</span></code>
<code>    <span class="hljs-keyword">for</span> part <span class="hljs-keyword">in</span> add.split <span class="hljs-regexp">/(?:\n|[ \t\r])(?=@)/g</span></code>
<code>      <span class="hljs-keyword">if</span> match = part.match <span class="hljs-regexp">/^@(\S+)\s*/</span></code>
<code>        name = tagAlias[match[<span class="hljs-number">1</span>]] ? match[<span class="hljs-number">1</span>]</code>
<code>        spec[name] ?= []</code>
<code>        spec[name].push part[match[<span class="hljs-number">0</span>].length..]</code>
<code>      <span class="hljs-keyword">break</span> <span class="hljs-keyword">if</span> match[<span class="hljs-number">1</span>] <span class="hljs-keyword">is</span> <span class="hljs-string">'internal'</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> setup.code</code>
<code>  <span class="hljs-comment"># split some tags further down into name and desc</span></code>
<code>  <span class="hljs-keyword">for</span> type <span class="hljs-keyword">in</span> [<span class="hljs-string">'return'</span>, <span class="hljs-string">'throws'</span>]</code>
<code>    <span class="hljs-keyword">if</span> spec[type]</code>
<code>      spec[type] = spec[type].map (e) -&gt;</code>
<code>        m = e.match <span class="hljs-regexp">/^\s*(?:\{([^}]+)\})?\s*([\s\S]+)$/</span></code>
<code>        <span class="hljs-keyword">if</span> m <span class="hljs-keyword">then</span> [m[<span class="hljs-number">1</span>], m[<span class="hljs-number">2</span>]]</code>
<code>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error <span class="hljs-string">"tag is not formatted properly: @<span class="hljs-subst">#{type}</span> <span class="hljs-subst">#{e}</span>"</span> <span class="hljs-keyword">unless</span> m</code>
<code>  <span class="hljs-comment"># split some tags further down into name, type and desc</span></code>
<code>  <span class="hljs-keyword">for</span> type <span class="hljs-keyword">in</span> [<span class="hljs-string">'param'</span>, <span class="hljs-string">'event'</span>]</code>
<code>    <span class="hljs-keyword">if</span> spec[type]</code>
<code>      spec[type] = spec[type].map (e) -&gt;</code>
<code>        m = e.match <span class="hljs-regexp">///</span></code>
<code><span class="hljs-regexp">          ^\s*          <span class="hljs-comment"># start of line (whitespace removed)</span></code>
<code>          (?:           <span class="hljs-comment"># find type</span></code>
<code>            \{([^}]+)\} <span class="hljs-comment"># #1: type in curly braces</span></code>
<code>            \s+         <span class="hljs-comment"># something has to follow</span></code>
<code>          )?            <span class="hljs-comment"># make it optional</span></code>
<code>          (\S+)         <span class="hljs-comment"># #2: name (mandatory)</span></code>
<code>          (?:\s+        <span class="hljs-comment"># find description</span></code>
<code>            (?:-\s+)?   <span class="hljs-comment"># allow optional dash as separator</span></code>
<code>            ([\s\S]*)   <span class="hljs-comment"># #3: description</span></code>
<code>          )?            <span class="hljs-comment"># make it optional</span></code>
<code>          $             <span class="hljs-comment"># end of line</span></code>
<code>        ///</span></code>
<code>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error <span class="hljs-string">"tag is not formatted properly: @<span class="hljs-subst">#{type}</span> <span class="hljs-subst">#{e}</span>"</span> <span class="hljs-keyword">unless</span> m</code>
<code>        <span class="hljs-keyword">if</span> details = m[<span class="hljs-number">2</span>].match <span class="hljs-regexp">/^\[([^=]*?)(?:\s*=\s*(.*))?\]$/</span></code>
<code>          m[<span class="hljs-number">2</span>] = details[<span class="hljs-number">1</span>]</code>
<code>          <span class="hljs-comment"># interpret optional and default for params</span></code>
<code>          m[<span class="hljs-number">3</span>] = <span class="hljs-string">"optional <span class="hljs-subst">#{m[<span class="hljs-number">3</span>] ? <span class="hljs-string">''</span>}</span>"</span></code>
<code>          m[<span class="hljs-number">3</span>] += <span class="hljs-string">" (default: <span class="hljs-subst">#{details[<span class="hljs-number">2</span>]}</span>)"</span> <span class="hljs-keyword">if</span> details[<span class="hljs-number">2</span>]</code>
<code>        <span class="hljs-keyword">if</span> m <span class="hljs-keyword">then</span> [m[<span class="hljs-number">1</span>], m[<span class="hljs-number">2</span>], m[<span class="hljs-number">3</span>]] <span class="hljs-keyword">else</span> [<span class="hljs-literal">null</span>, spec[type]]</code>
<code>  <span class="hljs-comment"># tags spec with auto detect</span></code>
<code>  <span class="hljs-keyword">if</span> lang.access <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> spec.access</code>
<code>    spec.access = [access] <span class="hljs-keyword">if</span> access = lang.access code</code>
<code>  <span class="hljs-comment"># get title</span></code>
<code>  title = <span class="hljs-keyword">if</span> lang.title <span class="hljs-keyword">then</span> lang.title code <span class="hljs-keyword">else</span> code</code>
<code>  <span class="hljs-keyword">if</span> spec.name</code>
<code>    <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> spec.name</code>
<code>      title = e</code>
<code>  <span class="hljs-comment"># register in symbol table</span></code>
<code>  <span class="hljs-keyword">if</span> title</code>
<code>    symbols[title] = [ file, uslug title ]</code>
<code>  <span class="hljs-comment"># deprecation warning</span></code>
<code>  <span class="hljs-keyword">if</span> spec.deprecated</code>
<code>    md += <span class="hljs-string">"\n::: warning\n**Deprecated!** <span class="hljs-subst">#{spec.deprecated.join <span class="hljs-string">' '</span>}</span>\n:::\n"</span></code>
<code>  <span class="hljs-keyword">try</span></code>
<code>    <span class="hljs-comment"># create usage line</span></code>
<code>    <span class="hljs-keyword">if</span> title <span class="hljs-keyword">and</span> (spec.access <span class="hljs-keyword">or</span> spec.private <span class="hljs-keyword">or</span> spec.protected <span class="hljs-keyword">or</span> spec.public <span class="hljs-keyword">or</span> spec.constant <span class="hljs-keyword">or</span></code>
<code>    spec.static <span class="hljs-keyword">or</span> spec.construct <span class="hljs-keyword">or</span> spec.param)</code>
<code>      md += <span class="hljs-string">"\n&gt; **Usage:** "</span></code>
<code>      <span class="hljs-keyword">if</span> spec.access</code>
<code>        md += <span class="hljs-string">"<span class="hljs-subst">#{util.array.last spec.access}</span> "</span></code>
<code>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> spec.private</code>
<code>        md += <span class="hljs-string">'private '</span></code>
<code>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> spec.protected</code>
<code>        md += <span class="hljs-string">'protected '</span></code>
<code>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> spec.public</code>
<code>        md += <span class="hljs-string">'public '</span></code>
<code>      md += <span class="hljs-string">'static '</span> <span class="hljs-keyword">if</span> spec.static</code>
<code>      md += <span class="hljs-string">'`'</span></code>
<code>      md += <span class="hljs-string">'const '</span> <span class="hljs-keyword">if</span> spec.constant</code>
<code>      md += <span class="hljs-string">'new '</span> <span class="hljs-keyword">if</span> spec.construct</code>
<code>      md += <span class="hljs-string">"<span class="hljs-subst">#{title}</span>`"</span></code>
<code>      <span class="hljs-keyword">if</span> spec.param</code>
<code>        md = md.replace <span class="hljs-regexp">/(\(\))?`$/</span>, <span class="hljs-string">''</span></code>
<code>        md += <span class="hljs-string">"(<span class="hljs-subst">#{spec.param.map((e) -&gt; e[<span class="hljs-number">1</span>]).join <span class="hljs-string">', '</span>}</span>)`\n"</span></code>
<code>      md += <span class="hljs-string">"\n&lt;!-- {p:.api-usage} --&gt;\n"</span></code>
<code>    <span class="hljs-comment"># method definitions</span></code>
<code>    md += tagParamEvent spec.param, <span class="hljs-string">'Parameter'</span> <span class="hljs-keyword">if</span> spec.param</code>
<code>    <span class="hljs-keyword">if</span> spec.<span class="hljs-keyword">return</span></code>
<code>      e = spec.<span class="hljs-keyword">return</span>[spec.<span class="hljs-keyword">return</span>.length<span class="hljs-number">-1</span>]</code>
<code>      md += <span class="hljs-string">"\nReturn\n:   "</span></code>
<code>      md += <span class="hljs-string">"`<span class="hljs-subst">#{e[<span class="hljs-number">0</span>]}</span>` - "</span> <span class="hljs-keyword">if</span> e[<span class="hljs-number">0</span>]</code>
<code>      md += <span class="hljs-string">"<span class="hljs-subst">#{e[<span class="hljs-number">1</span>].replace <span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">'\n      '</span>}</span>\n    "</span></code>
<code>    <span class="hljs-keyword">if</span> spec.throws</code>
<code>      md += <span class="hljs-string">"\nThrows\n:   "</span></code>
<code>      <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> spec.throws</code>
<code>        md += <span class="hljs-string">"- "</span></code>
<code>        md += <span class="hljs-string">"`<span class="hljs-subst">#{e[<span class="hljs-number">0</span>]}</span>` - "</span> <span class="hljs-keyword">if</span> e[<span class="hljs-number">0</span>]</code>
<code>        md += <span class="hljs-string">"<span class="hljs-subst">#{e[<span class="hljs-number">1</span>].replace <span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">'\n      '</span>}</span>\n    "</span></code>
<code>    md += tagParamEvent spec.event, <span class="hljs-string">'Event'</span> <span class="hljs-keyword">if</span> spec.event</code>
<code>    <span class="hljs-keyword">if</span> spec.see</code>
<code>      md += <span class="hljs-string">"\nSee also\n:   "</span></code>
<code>      <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> spec.see</code>
<code>        md += <span class="hljs-string">"- "</span></code>
<code>        md += <span class="hljs-string">"<span class="hljs-subst">#{e.replace <span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">'      \n'</span>}</span>\n    "</span></code>
<code>    <span class="hljs-keyword">if</span> spec.param <span class="hljs-keyword">or</span> spec.<span class="hljs-keyword">return</span> <span class="hljs-keyword">or</span> spec.throws <span class="hljs-keyword">or</span> spec.event <span class="hljs-keyword">or</span> spec.see</code>
<code>      md += <span class="hljs-string">"\n&lt;!-- {dl:.api-spec} --&gt;\n"</span></code>
<code>    <span class="hljs-comment"># signature</span></code>
<code>    <span class="hljs-keyword">if</span> spec.version <span class="hljs-keyword">or</span> spec.copyright <span class="hljs-keyword">or</span> spec.author <span class="hljs-keyword">or</span> spec.license</code>
<code>      md += <span class="hljs-string">"\n"</span></code>
<code>      <span class="hljs-keyword">for</span> type <span class="hljs-keyword">in</span> [<span class="hljs-string">'version'</span>, <span class="hljs-string">'copyright'</span>, <span class="hljs-string">'author'</span>]</code>
<code>        <span class="hljs-keyword">if</span> spec[type]</code>
<code>          md += <span class="hljs-string">"<span class="hljs-subst">#{spec[type].join <span class="hljs-string">' '</span>}</span> "</span></code>
<code>      <span class="hljs-keyword">if</span> spec.license</code>
<code>        md += <span class="hljs-string">"- License: <span class="hljs-subst">#{spec.license.join <span class="hljs-string">' '</span>}</span> "</span></code>
<code>      md += <span class="hljs-string">"\n\n&lt;!-- {p:.api-signature} --&gt;\n"</span></code>
<code>    <span class="hljs-comment"># additional text</span></code>
<code>    md += <span class="hljs-string">"\n<span class="hljs-subst">#{spec.description.join <span class="hljs-string">' '</span>}</span>\n"</span> <span class="hljs-keyword">if</span> spec.description</code>
<code>    <span class="hljs-keyword">if</span> spec.internal <span class="hljs-keyword">and</span> setup.code</code>
<code>      md += <span class="hljs-string">"\n<span class="hljs-subst">#{spec.internal.join <span class="hljs-string">' '</span>}</span>\n"</span></code>
<code>    <span class="hljs-comment"># add heading 3 if not there</span></code>
<code>    <span class="hljs-keyword">if</span> title <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> md.match <span class="hljs-regexp">/(^|\n)(#{1,3}[^#]|[^\n]+\n[-=]{3,})/</span></code>
<code>      md = <span class="hljs-string">"### <span class="hljs-subst">#{title}</span>\n\n<span class="hljs-subst">#{md}</span>"</span></code>
<code>    <span class="hljs-comment"># store changes</span></code>
<code>    doc[<span class="hljs-number">2</span>] = md</code>
<code>  <span class="hljs-keyword">catch</span> error</code>
<code>    <span class="hljs-built_in">console</span>.error chalk.magenta <span class="hljs-string">"Document error: <span class="hljs-subst">#{error.message}</span> at <span class="hljs-subst">#{file}</span>:</code>
<code>    \n     <span class="hljs-subst">#{chalk.grey doc[<span class="hljs-number">2</span>].replace <span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">'\n     '</span>}</span>"</span></code></pre>
<h3 id="tagparamevent">tagParamEvent()</h3>
<blockquote>
<p class="api-usage"><strong>Usage:</strong> <code>tagParamEvent(spec, title)</code></p>
</blockquote>
<dl class="api-spec">
<dt>Parameter</dt>
<dd>
<ul>
<li><code>spec</code> - <code>Array</code> - list of tag contents</li>
<li><code>title</code> - <code>String</code> - name to display for this spec type</li>
</ul>
</dd>
<dt>Return</dt>
<dd><code>String</code> - markdown to add</dd>
</dl>
<pre style="counter-reset:line 342" class="language coffeescript"><header>CoffeeScript Code</header><code><span class="hljs-function"><span class="hljs-title">tagParamEvent</span> = <span class="hljs-params">(spec, title)</span> -&gt;</span></code>
<code>  md = <span class="hljs-string">"\n<span class="hljs-subst">#{title}</span>\n:   "</span></code>
<code>  <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> spec</code>
<code>    md += <span class="hljs-string">"- "</span></code>
<code>    md += <span class="hljs-string">"`<span class="hljs-subst">#{e[<span class="hljs-number">1</span>]}</span>` - "</span> <span class="hljs-keyword">if</span> e[<span class="hljs-number">1</span>]</code>
<code>    md += <span class="hljs-string">"`<span class="hljs-subst">#{e[<span class="hljs-number">0</span>]}</span>` - "</span> <span class="hljs-keyword">if</span> e[<span class="hljs-number">0</span>]</code>
<code>    <span class="hljs-keyword">if</span> e[<span class="hljs-number">2</span>] <span class="hljs-keyword">then</span> md += <span class="hljs-string">"<span class="hljs-subst">#{e[<span class="hljs-number">2</span>].replace <span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">'\n      '</span>}</span>\n    "</span></code>
<code>    <span class="hljs-keyword">else</span> md = md[..<span class="hljs-number">-4</span>] + <span class="hljs-string">'\n    '</span></code>
<code>  <span class="hljs-keyword">return</span> md</code></pre>
</main>
        </div>
        <div class="col-sm-3 col-cm-pull-9 col-md-2 col-md-pull-10 sidebar">
          <h1 id="further-pages">Further Pages</h1>
          <ul class="nav nav-sidebar">
            <li class="header">
              <a href="../../README.md.html">CodeDoc</a>
            </li>
                <li class="level0">
                  <a href="../../README.md.html" title="Alinex CodeDoc: Readme (/README.md)">Readme</a>
                </li>
                <li class="level2">
                  <a href="../man/codedoc.1.md.html" title="codedoc(1) - Manpage (/src/man/codedoc.1.md)">Manpage</a>
                </li>
                <li class="level1">
                  <a href="../document.md.html" title="Writing Docs (/src/document.md)">Writing Docs</a>
                </li>
                <li class="level1">
                  <a href="../template.md.html" title="Templates (/src/template.md)">Templates</a>
                </li>
                <li class="level1">
                  <a href="../index.coffee.html" title="Controller - API Usage (/src/index.coffee)">API Usage</a>
                </li>
                <li class="level2">
                  <a href="../example/coffee.md.html" title="Example: CoffeeScript (/src/example/coffee.md)">CoffeeScript</a>
                </li>
                <li class="level2">
                  <a href="language.coffee.html" title="Language Definition (/src/helper/language.coffee)">Language Definition</a>
                </li>
                <li class="active level2">
                  <a href="parse.coffee.html" title="Parser (/src/helper/parse.coffee)">Parser <span class="sr-only">(current)</span></a>
                </li>
                <li class="level2">
                  <a href="render.coffee.html" title="Renderer (/src/helper/render.coffee)">Renderer</a>
                </li>
                <li class="level1">
                  <a href="../cli.coffee.html" title="CLI Parser (/src/cli.coffee)">CLI Parser</a>
                </li>
                <li class="level0">
                  <a href="../../coffeelint.json.html" title="File: coffeelint.json (/coffeelint.json)">coffeelint.json</a>
                </li>
                <li class="level0">
                  <a href="../../package.json.html" title="File: package.json (/package.json)">package.json</a>
                </li>
                <li class="level1">
                  <a href="../../bin/codedoc.html" title="Executable (/bin/codedoc)">Executable</a>
                </li>
                <li class="level1">
                  <a href="../../var/index.md.html" title="Layout and Style (/var/index.md)">Layout and Style</a>
                </li>
                <li class="level4">
                  <a href="../../var/src/template/report/codedoc-links.hbs.html" title="File: codedoc-links.hbs (/var/src/template/report/codedoc-links.hbs)">codedoc-links.hbs</a>
                </li>
                <li class="level4">
                  <a href="../../var/src/template/report/codedoc-logo.hbs.html" title="File: codedoc-logo.hbs (/var/src/template/report/codedoc-logo.hbs)">codedoc-logo.hbs</a>
                </li>
                <li class="level4">
                  <a href="../../var/src/template/report/codedoc-search-result.hbs.html" title="File: codedoc-search-result.hbs (/var/src/template/report/codedoc-search-result.hbs)">codedoc-search-result.hbs</a>
                </li>
                <li class="level4">
                  <a href="../../var/src/template/report/codedoc.css.html" title="File: codedoc.css (/var/src/template/report/codedoc.css)">codedoc.css</a>
                </li>
                <li class="level4">
                  <a href="../../var/src/template/report/codedoc.hbs.html" title="File: codedoc.hbs (/var/src/template/report/codedoc.hbs)">codedoc.hbs</a>
                </li>
                <li class="level4">
                  <a href="../../var/src/template/report/codedoc.styl.html" title="codedoc Style (/var/src/template/report/codedoc.styl)">codedoc Style</a>
                </li>
                <li class="level0">
                  <a href="../../.travis.yml.html" title="File: .travis.yml (/.travis.yml)">.travis.yml</a>
                </li>
                <li class="level0">
                  <a href="../../Changelog.md.html" title="Version changes (/Changelog.md)">Version changes</a>
                </li>
          </ul>
        </div>

      </div>
    </div>

    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script type="text/javascript"><!--
    $(".table-of-contents").bind("mouseleave", function(event) { $(".table-of-contents").scrollTop(0); });
    //--></script>
  </body>
</html>
